(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{200:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return s})),r.d(t,"metadata",(function(){return i})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return l}));var n=r(3),o=(r(0),r(291)),a=r(293);const s={title:"Retry requests"},i={unversionedId:"examples/retry-requests",id:"examples/retry-requests",isDocsHomePage:!1,title:"Retry requests",description:"You can use retry parameter to retry your request number of times if it failed.",source:"@site/docs/examples/retry-requests.md",slug:"/examples/retry-requests",permalink:"/fetch-api/docs/next/examples/retry-requests",editUrl:"https://github.com/mihanizm56/fetch-api/tree/docs/docs/examples/retry-requests.md",version:"current",sidebar:"someSidebar",previous:{title:"Response progress",permalink:"/fetch-api/docs/next/examples/response-progress"},next:{title:"Translation",permalink:"/fetch-api/docs/next/examples/translation"}},c=[],u={toc:c};function l(e){let{components:t,...r}=e;return Object(o.a)("wrapper",Object(n.a)({},u,r,{components:t,mdxType:"MDXLayout"}),Object(o.a)("p",null,"You can use retry parameter to retry your request number of times if it failed."),Object(o.a)("p",null,"Request on example below will make three attempts to request the data,\nIf it fails on 3rd try - the errror response will be provided"),Object(o.a)("p",null,"You need to know that the retry parameter is binded with the timeoutValue parameter (see ",Object(o.a)(a.a,{to:"/docs/examples/request-timeout",mdxType:"Link"},"timeoutValue example"),")"),Object(o.a)("p",null,"|-------timeoutValue--------|"),Object(o.a)("p",null,"|--retry1--retry2--retry3--|"),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},'import { RestRequest, IResponse } from "@mihanizm56/fetch-api";\n\nexport const getWhateverRequest = (someData): Promise<IResponse> =>\n  new RestRequest().getRequest({\n    endpoint: "http://localhost:3000",\n    responseSchema: Joi.object({\n      test_string_field: Joi.string().required(),\n    }),\n    retry: 3\n  });\n')),Object(o.a)("p",null,"You can use extraVerifyRetry param - that is callback with IResponse response type as params. There you can create different contitionals to retry requests on different situations. For example, if you need to retry request if response code not 401:"),Object(o.a)("pre",null,Object(o.a)("code",{parentName:"pre",className:"language-javascript"},'import { RestRequest, IResponse } from "@mihanizm56/fetch-api";\nimport { ExtraVerifyRetryCallbackType } from \'@mihanizm56/fetch-api/dist/types\';\n\nexport const extraVerifyNotAuthRetry: ExtraVerifyRetryCallbackType = ({\n  formattedResponseData: { code, error },\n}) => {\n  if (!error) {\n    return false;\n  }\n\n  if (code === 401) {\n    return false;\n  }\n\n  return true;\n};\n\n\nexport const getWhateverRequest = (someData): Promise<IResponse> =>\n  new RestRequest().getRequest({\n    endpoint: "http://localhost:3000",\n    responseSchema: Joi.object({\n      test_string_field: Joi.string().required(),\n    }),\n    retry: 3,\n    extraVerifyRetry: extraVerifyNotAuthRetry,\n  });\n')))}l.isMDXComponent=!0},291:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(0),o=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=o.a.createContext({}),l=function(e){var t=o.a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},f=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),f=l(r),m=n,d=f["".concat(s,".").concat(m)]||f[m]||p[m]||a;return r?o.a.createElement(d,i(i({ref:t},u),{},{components:r})):o.a.createElement(d,i({ref:t},u))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,s=new Array(a);s[0]=f;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var u=2;u<a;u++)s[u]=r[u];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"},292:function(e,t,r){"use strict";function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!n(e)}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}))},293:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(10),s=r(292),i=r(8);const c=Object(n.createContext)({collectLink:()=>{}});var u=r(294),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};t.a=function(e){var t,{isNavLink:r,to:p,href:f,activeClassName:m,isActive:d,"data-noBrokenLinkCheck":y,autoAddBaseUrl:b=!0}=e,h=l(e,["isNavLink","to","href","activeClassName","isActive","data-noBrokenLinkCheck","autoAddBaseUrl"]);const{withBaseUrl:O}=Object(u.b)(),v=Object(n.useContext)(c),j=p||f,g=Object(s.a)(j),w=null==j?void 0:j.replace("pathname://",""),x=void 0!==w?(R=w,b&&(e=>e.startsWith("/"))(R)?O(R):R):void 0;var R;const q=Object(n.useRef)(!1),k=r?a.e:a.c,P=i.a.canUseIntersectionObserver;let E;Object(n.useEffect)((()=>(!P&&g&&window.docusaurus.prefetch(x),()=>{P&&E&&E.disconnect()})),[x,P,g]);const C=null!==(t=null==x?void 0:x.startsWith("#"))&&void 0!==t&&t,N=!x||!g||C;return x&&g&&!C&&!y&&v.collectLink(x),N?o.a.createElement("a",Object.assign({href:x},j&&!g&&{target:"_blank",rel:"noopener noreferrer"},h)):o.a.createElement(k,Object.assign({},h,{onMouseEnter:()=>{q.current||(window.docusaurus.preload(x),q.current=!0)},innerRef:e=>{var t,r;P&&e&&g&&(t=e,r=()=>{window.docusaurus.prefetch(x)},E=new window.IntersectionObserver((e=>{e.forEach((e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(E.unobserve(t),E.disconnect(),r())}))})),E.observe(t))},to:x||""},r&&{isActive:d,activeClassName:m}))}},294:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r(16),o=r(292);function a(){const{siteConfig:{baseUrl:e="/",url:t}={}}=Object(n.default)();return{withBaseUrl:(r,n)=>function(e,t,r,n){let{forcePrependBaseUrl:a=!1,absolute:s=!1}=void 0===n?{}:n;if(!r)return r;if(r.startsWith("#"))return r;if(Object(o.b)(r))return r;if(a)return t+r;const i=r.startsWith(t)?r:t+r.replace(/^\//,"");return s?e+i:i}(t,e,r,n)}}function s(e,t){void 0===t&&(t={});const{withBaseUrl:r}=a();return r(e,t)}}}]);